

{% if asPlayList %}
    <form action="" method = "get">
        {% csrf_token %}
        <button type="submit" name="filelist">As FileList</button>
    </form>
{% else %}
    <form action="" method = "get">
        {% csrf_token %}
        <button type="submit" name="playlist">As PlayList</button>
    </form>

{% endif %}



{% if songlist %}
<h4>{{listTitle}}</h4>

{% if asPlayList %}
    {% load static %}
    {% for song,path in songlist %}
        {% if forloop.first %}
        
            {% if song.musician_set.count %}
                {% for musician in song.musician_set.all %}
                    <li>by: <a href="{{musician.get_absolute_url}}">{{musician.fullName|title}}</a></li>
                {% endfor %}
                <br>
            {% endif %}
        
            <audio src="" controls id="audioPlayer">
                Sorry, your browser does not support HTML5 audio.
            </audio>
            <ul id="playlist">
            <li class="current-song"><a href="{% static path %}"> {{song.title|title}}</a></li>
        {% else %}
            <li><a href="{% static path %}">{{song.title|title}}</a></li>
        {% endif %}
        {% if forloop.last %}
            </ul>
        {% endif %}
    {% endfor %}

{% else %}

    <ul id="filelist">
    {% for song,path in songlist %}
        {% if forloop.first %}
            {% if song.musician_set.count %}
                {% for musician in song.musician_set.all %}
                    <li>by: <a href="{{musician.get_absolute_url}}">{{musician.fullName|title}}</a></li>
                {% endfor %}
                <br>
            {% endif %}
        {% endif %}
        <li><a href="{{ song.get_absolute_url }}">{{song.title|title}}</a></li>
    {% endfor %}
    </ul>

{% endif %}
{% endif %}

<script src="{% static 'jquery.js' %}" type="text/javascript"></script>
<script src="{% static 'audioplay.js' %}" type="text/javascript"></script>
<script>
    // loads the audio player
    init();
    
</script>

